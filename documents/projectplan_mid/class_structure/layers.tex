%!tikz editor 1.0
%!tikz source begin
\begin{tikzpicture}[scale=0.75, transform shape]
	
	\tikzstyle{block} = [
		rectangle, draw, fill=blue!20, 
		text width=20em, text centered, 
		rounded corners, minimum height=4em,
		node distance=2.5cm]
	
	\tikzstyle{block-active} = [
		rectangle, draw, fill=green!20, 
		text width=20em, text centered, 
		rounded corners, minimum height=4em,
		node distance=2.5cm]
		
	\tikzstyle{cloud} = [draw, ellipse,fill=red!20, node distance=2cm, minimum height=2em]
	
	\tikzstyle{line} = [draw, ->, >=stealth', ultra thick]
	\tikzstyle{dline} = [draw, <->, >=stealth', ultra thick]
		
    % Layers
	\node [block] (control) {\huge \textbf{Control}};
    \node [block, below of=control] (autonomous) {\huge \textbf{Autonomous}};
	\node [block, below of=autonomous] (abstraction) {\huge \textbf{Abstraction}};
	
	% Clouds
	\node [below of=abstraction, node distance=2cm] (babstraction) {} ;
	\node [cloud, right of=babstraction] (robots) {\large \textbf{Robots}};
	\node [cloud, left of=babstraction] (referee) {\large \textbf{Referee}};
    
	% Connections
	\path [line] ($(control.south) + (1,0)$) -- ($(autonomous.north) + (1,0)$);
	\path [line] ($(autonomous.north) + (-1,0)$) -- ($(control.south) + (-1,0)$);
	
	\path [line] ($(autonomous.south) + (1,0)$) -- ($(abstraction.north) + (1,0)$);
	\path [line] ($(abstraction.north) + (-1,0)$) -- ($(autonomous.south) + (-1,0)$);
	
	\path [dline] (referee) -- (abstraction);
	\path [dline] (robots) -- (abstraction);
	
	% Background Box
	\begin{pgfonlayer}{background}
		\draw [dashed, very thick, fill=black!10] ($(abstraction) +(5,-1.25)$) rectangle ($(control)+(-5,1.25)$);
		\draw ($(abstraction) +(5,-1)$) node [left] {\large \textit{Team C}};
	\end{pgfonlayer}
	
	
\end{tikzpicture}
%!tikz source end
